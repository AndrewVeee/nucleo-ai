{"title":"Message Handler","prompts":[{"id":1,"log":"Summarizing message","name":"prompt1","inputs":["message"],"outputs":[{"name":"summary","event":"summary","parser":"full_response"}],"prompt":"You're a helpful bot that summarizes incoming messages.\n```\n{{message}}\n```\n\nMake sure to note if it's a bill, invoice, spam, ad, personal, automated email, or newsletter.\n\nWrite a one sentence summary from the perspective of the sender. {{ai_tone}} Start with: This is a..."},{"id":2,"log":"Categorizing message","name":"prompt2","inputs":["summary"],"outputs":[{"name":"msg_category","event":"categorize","parser":"from_line","parser_ex":"category:"}],"prompt":"You're a helpful bot that categorizes incoming messages. Summary:\n```\n{{summary}}\n```\n\nCategorize this message as:\nbills: Bills, invoices, and other payments.\nautomated: Automated messages like social notifications.\nadvert: An advertisement.\nspam: Spam message.\npersonal: A personal message.\n\n Just reply with Category: <category-name>"},{"id":3,"log":"Extracting invoice information","name":"prompt3","inputs":["invoice"],"outputs":[{"name":"invoice","event":"summary:Invoice","parser":"full_response"}],"prompt":"You're a helpful bot that extracts invoice information. Summary:\n```\n{{invoice}}\n```\n\nExtract as much information from the context above as you can: Due date, total cost, payment link, and service description if possible. Reply with each field and value on its own line."},{"id":4,"log":"Suggest replies","name":"prompt4","inputs":["message"],"outputs":[{"name":"replies","event":"suggest:reply","parser":"full_response"}],"prompt":"You are a helpful assistant.\n\nMessage:\n```\n{{message}}\n```\n\nWrite 4 options that the user might want to reply with. {{ai_tone}}"}],"entry_points":[{"id":1,"opts":{"conditions":[],"map":{"message":"message"}},"entry_points":[{"id":2,"opts":{"conditions":[],"map":{"summary":"message"}},"entry_points":[]},{"id":3,"opts":{"conditions":[{"op":"==","name":"msg_category","value":"bills"}],"map":{"invoice":"message"}},"entry_points":[]},{"id":4,"opts":{"conditions":[{"op":"==","name":"msg_category","value":"personal"}],"map":{"message":"message"}},"entry_points":[]}]}]}